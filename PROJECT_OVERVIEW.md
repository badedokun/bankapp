# üè¶ OrokiiPay Multi-Tenant Banking Platform - Project Overview

## üìã **CRITICAL: Read This First**
This document is essential for any Claude Code agent working on this project. It contains the complete project architecture, database structure, and key implementation details to prevent rework of existing functionality.

---

## üéØ **Project Identity**
- **Name**: OrokiiPay Multi-Tenant Banking Platform  
- **Version**: 0.0.1  
- **Type**: Cross-platform financial technology application  
- **Architecture**: Multi-tenant SaaS with database-per-tenant isolation  

---

## üèóÔ∏è **System Architecture Overview**

### **Multi-Tier Architecture**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    FRONTEND LAYER                       ‚îÇ
‚îÇ  React Native + React Native Web (Cross-Platform)      ‚îÇ
‚îÇ  Port 3000 (React Native) + Port 8080 (Web)           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                ‚îÇ
                                ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                   API GATEWAY LAYER                     ‚îÇ
‚îÇ         Express.js Backend API (Port 3001)             ‚îÇ
‚îÇ    JWT Auth + Multi-Tenant Middleware + Rate Limiting  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                ‚îÇ
                                ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                  DATABASE LAYER                         ‚îÇ
‚îÇ                                                         ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ   PLATFORM DB       ‚îÇ  ‚îÇ    TENANT DATABASES     ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ (tenant registry)   ‚îÇ  ‚îÇ (per-tenant isolation)  ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ PostgreSQL          ‚îÇ  ‚îÇ PostgreSQL              ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### **Multi-Tenant Model**
- **Database-per-tenant**: Each tenant has isolated database (`tenant_{name}_mt`)
- **Shared application code**: Single codebase serves all tenants
- **Tenant routing**: Via subdomain, header, or JWT token context

---

## üõ†Ô∏è **Technology Stack**

### **Frontend**
- **React Native**: 0.81.1 (Mobile iOS/Android)
- **React Native Web**: 0.21.1 (Web browser support)  
- **Navigation**: React Navigation v7 (Stack & Bottom Tabs)
- **State Management**: Redux Toolkit + React Query
- **Build Tools**: Webpack 5, Babel, TypeScript
- **Testing**: Jest + React Native Testing Library

### **Backend**
- **Runtime**: Node.js 20+ with TypeScript  
- **Framework**: Express.js 5.1.0
- **Authentication**: JWT + Refresh Tokens (jsonwebtoken 9.0.2)
- **Security**: Helmet, CORS, Rate Limiting, bcrypt hashing
- **Database**: PostgreSQL with `pg` driver
- **Validation**: express-validator
- **Development**: ts-node, nodemon

### **Database**
- **Primary**: PostgreSQL 15+ with extensions
- **Connection**: Connection pooling per tenant
- **Extensions**: uuid-ossp, pgcrypto, pg_stat_statements, btree_gin
- **Backup**: Automated with configurable schedules

### **DevOps & Testing**
- **Testing**: Jest multi-project configuration (Frontend/Backend/Integration)
- **Scripts**: ts-node for database operations and tenant provisioning
- **Environment**: dotenv with multiple environment configurations
- **CI/CD Ready**: Jest CI configuration with coverage

---

## üìä **Database Architecture**

### **Platform Database** (`bank_app_platform`)
**Schemas**: `platform`, `audit`, `analytics`, `public`

**Key Tables**:
```sql
-- Central tenant registry
platform.tenants {
    id: UUID (Primary Key)
    name: VARCHAR(255) UNIQUE
    display_name: VARCHAR(255) 
    subdomain: VARCHAR(100) UNIQUE
    status: ENUM('active', 'suspended', 'inactive', 'pending', 'provisioning')
    tier: ENUM('basic', 'premium', 'enterprise')
    database_config: JSONB -- Connection details
    configuration: JSONB -- Business rules & settings
    branding: JSONB -- Custom styling & assets
    ai_configuration: JSONB -- AI features per tenant
    security_settings: JSONB -- Security policies
}

-- Tenant asset storage (Base64 encoded)
platform.tenant_assets {
    tenant_id: UUID FK -> platform.tenants.id
    asset_type: VARCHAR(50) -- 'logo', 'favicon', 'hero_image', etc.
    asset_name: VARCHAR(255)
    asset_data: TEXT -- Base64 encoded binary data
    mime_type: VARCHAR(100)
    file_size: INTEGER
    dimensions: JSONB -- width/height for images
}
```

### **Tenant Databases** (`tenant_{name}_mt`)
**Schemas**: `tenant`, `ai`, `analytics`, `audit`

**Key Tables**:
```sql
-- Tenant metadata (single record per database)
tenant.tenant_metadata {
    tenant_id: UUID NOT NULL
    tenant_name: VARCHAR(255)
    schema_version: VARCHAR(50)
}

-- User management per tenant
tenant.users {
    id: UUID PRIMARY KEY
    tenant_id: UUID NOT NULL
    email: VARCHAR(255) UNIQUE NOT NULL
    phone_number: VARCHAR(20) UNIQUE
    password_hash: VARCHAR(255)
    first_name, last_name: VARCHAR(100)
    role: ENUM('customer', 'agent', 'manager', 'admin')
    status: ENUM('active', 'inactive', 'suspended', 'pending')
    permissions: JSONB
    kyc_status: ENUM('pending', 'submitted', 'approved', 'rejected')
    mfa_enabled: BOOLEAN
    biometric_enabled: BOOLEAN
}

-- Financial wallets
tenant.wallets {
    id: UUID PRIMARY KEY
    user_id: UUID FK -> tenant.users.id
    wallet_number: VARCHAR(20) UNIQUE
    wallet_type: ENUM('main', 'savings', 'business')
    currency: VARCHAR(3) DEFAULT 'NGN'
    balance: DECIMAL(15,2)
    available_balance: DECIMAL(15,2)
    status: ENUM('active', 'frozen', 'closed')
}

-- Transaction records
tenant.transactions {
    id: UUID PRIMARY KEY
    reference_number: VARCHAR(50) UNIQUE
    sender_user_id: UUID FK -> tenant.users.id
    sender_wallet_id: UUID FK -> tenant.wallets.id
    recipient_name: VARCHAR(255)
    recipient_account_number: VARCHAR(20)
    recipient_bank_code: VARCHAR(10)
    amount: DECIMAL(15,2) NOT NULL
    fees: DECIMAL(15,2) DEFAULT 0
    transaction_type: ENUM('money_transfer', 'cash_withdrawal', 'bill_payment')
    status: ENUM('pending', 'processing', 'completed', 'failed', 'cancelled')
    description: TEXT
}
```

---

## üöÄ **Development Commands**

### **Frontend Development**
```bash
npm start                 # Start React Native Metro bundler
npm run web              # Start web development server (port 8080)  
npm run ios              # Run on iOS simulator
npm run android          # Run on Android emulator
npm run web:build        # Production web build
```

### **Backend Development**
```bash
npm run server           # Start backend API server (port 3001)
npm run server:dev       # Start with nodemon auto-reload
npm run server:build     # Compile TypeScript to JavaScript  
npm run server:prod      # Production build + start
```

### **Database Operations**
```bash
npm run db:setup         # Initialize platform database
npm run db:seed          # Seed with sample data
npm run db:reset         # Reset database (DESTRUCTIVE)
npm run provision-tenant # Create new tenant database
```

### **Testing**
```bash
npm test                 # Run all tests (Frontend + Backend + Integration)
npm run test:frontend    # React Native component tests
npm run test:backend     # API and database tests  
npm run test:integration # Full integration test suite
npm run test:coverage    # Generate coverage report
```

---

## üîê **Enterprise Security Architecture**

### **Zero Trust Security Framework**
- **Never Trust, Always Verify**: Continuous verification of users, devices, and transactions
- **Micro-segmentation**: Network and application-level isolation
- **Least Privilege Access**: Minimal access rights for all system components
- **Continuous Monitoring**: Real-time security event analysis and response

### **Multi-Tenant Security Boundaries**
```typescript
interface SecurityBoundaries {
  hardBoundaries: {
    databaseAccess: 'Complete isolation - no cross-tenant queries possible';
    encryptionKeys: 'AES-256-GCM unique keys per tenant, no shared secrets';
    userSessions: 'Tenant-scoped JWT tokens with cryptographic binding';
    storageAccess: 'Tenant-specific encrypted storage containers';
  };
  softBoundaries: {
    platformServices: 'Shared services with strict tenant context validation';
    aggregatedAnalytics: 'Anonymized cross-tenant insights with differential privacy';
    platformManagement: 'Admin access with comprehensive audit logging';
  };
}
```

### **Regulatory Compliance Framework**
- **CBN (Central Bank of Nigeria)**: Data localization, cybersecurity framework, incident reporting
- **PCI DSS Level 1**: Cardholder data protection, network segmentation, monitoring
- **ISO 27001 ISMS**: Information security management system implementation
- **Nigerian Data Protection**: NDPR compliance with customer data localization

### **Advanced Security Components**
1. **HSM Key Management**: Hardware security modules for encryption key storage and rotation
2. **WAF Protection**: Web Application Firewall with OWASP Top 10 protection
3. **SIEM Integration**: Security Information and Event Management with real-time alerting
4. **AI-Powered Fraud Detection**: ML-based behavioral analysis and risk scoring (< 500ms)
5. **Biometric Security**: Multi-factor authentication with behavioral biometrics
6. **Nigerian Threat Intelligence**: Local cybercrime pattern recognition and mitigation

### **Security Middleware Stack**
1. **Zero Trust Gateway**: Identity verification and continuous trust evaluation
2. **WAF Layer**: OWASP protection and request sanitization
3. **Rate Limiter**: Advanced tenant-aware throttling with AI anomaly detection
4. **JWT Middleware**: Enhanced token verification with tenant binding
5. **Tenant Context Validator**: Strict boundary enforcement and audit logging
6. **AI Security Monitor**: Real-time threat detection and automated response

---

## üìÅ **Project Structure**

```
bankapp/
‚îú‚îÄ‚îÄ üì± Frontend
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/          # Reusable UI components
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ screens/             # Screen components (navigation routes)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth/            # Login, register screens
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dashboard/       # Dashboard screen  
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ history/         # Transaction history
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ transfer/        # Money transfer screens
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/            # API client and data services
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ utils/               # Helper utilities
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ types/               # TypeScript type definitions
‚îÇ   ‚îú‚îÄ‚îÄ App.tsx                  # Main app component
‚îÇ   ‚îî‚îÄ‚îÄ index.js                 # React Native entry point
‚îÇ
‚îú‚îÄ‚îÄ üñ•Ô∏è Backend
‚îÇ   ‚îú‚îÄ‚îÄ server/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ routes/              # API route handlers
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.ts          # Authentication endpoints
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ users.ts         # User management
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ wallets.ts       # Wallet operations  
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ transfers.ts     # Money transfer APIs
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tenants.ts       # Tenant management
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ assets.ts        # Asset serving (logos, etc.)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ middleware/          # Express middleware
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.ts          # JWT authentication
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tenant.ts        # Multi-tenant context
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ security.ts      # Zero Trust security controls
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ waf.ts           # Web Application Firewall
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ rateLimiter.ts   # AI-enhanced rate limiting
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ errorHandler.ts  # Error handling
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/            # Security and AI services
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ fraud-service/   # AI fraud detection
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ai-intelligence/ # Conversational AI
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ security/        # Security monitoring
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ compliance/      # CBN/PCI DSS compliance
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ encryption/      # HSM key management
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ config/              # Configuration files
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ database.ts      # Database connection management
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ security.ts      # Security configuration
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ compliance.ts    # Regulatory compliance
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.ts             # Express server entry point
‚îÇ
‚îú‚îÄ‚îÄ üóÑÔ∏è Database  
‚îÇ   ‚îú‚îÄ‚îÄ migrations/              # SQL migration files
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ 001_initial_platform_setup.sql
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ 002_tenant_template_schema.sql
‚îÇ   ‚îî‚îÄ‚îÄ seeds/                   # Sample data scripts
‚îÇ
‚îú‚îÄ‚îÄ üìã Scripts
‚îÇ   ‚îú‚îÄ‚îÄ setup-database.ts       # Database initialization
‚îÇ   ‚îú‚îÄ‚îÄ provision-tenant-database.ts  # New tenant setup
‚îÇ   ‚îî‚îÄ‚îÄ insert-fmfb-mock-data-final.sql  # FMFB test data
‚îÇ
‚îú‚îÄ‚îÄ üß™ Tests
‚îÇ   ‚îú‚îÄ‚îÄ backend/                 # Backend API tests
‚îÇ   ‚îú‚îÄ‚îÄ integration/             # Full integration tests  
‚îÇ   ‚îî‚îÄ‚îÄ src/                     # Frontend component tests
‚îÇ
‚îú‚îÄ‚îÄ ‚öôÔ∏è Configuration
‚îÇ   ‚îú‚îÄ‚îÄ .env*                    # Environment configurations
‚îÇ   ‚îú‚îÄ‚îÄ jest.config.js           # Multi-project test configuration
‚îÇ   ‚îú‚îÄ‚îÄ webpack.config.js        # Web build configuration
‚îÇ   ‚îî‚îÄ‚îÄ tsconfig.json            # TypeScript configuration
```

---

## üåê **API Endpoints Overview**

### **Authentication** (`/api/auth`)
- `POST /login` - User authentication with tenant context
- `POST /refresh` - Token refresh
- `POST /logout` - Session termination  

### **User Management** (`/api/users`)
- `GET /` - List tenant users (admin only)
- `GET /:id` - Get user details
- `PUT /:id` - Update user information

### **Wallet Operations** (`/api/wallets`)  
- `GET /balance` - Get wallet balance
- `GET /statement` - Transaction history
- `PUT /set-pin` - Set transaction PIN
- `POST /verify-pin` - Verify transaction PIN

### **Money Transfers** (`/api/transfers`)
- `POST /initiate` - Start money transfer
- `GET /history` - Transfer history  
- `GET /:id` - Get transfer details
- `POST /validate-recipient` - Validate recipient account

### **Tenant Management** (`/api/tenants`)
- `GET /` - List all tenants (platform admin)
- `GET /:id` - Get tenant details
- `GET /:tenantId/assets/:assetType/:assetName` - Serve tenant assets

---

## üîß **Environment Configuration**

### **Environment Files**
- **`.env`**: Default development configuration
- **`.env.fmfb`**: FMFB tenant-specific settings  
- **`.env.saas`**: SaaS platform configuration
- **`.env.test`**: Testing environment

### **Key Environment Variables**
```bash
# Database
DATABASE_URL=postgresql://user:password@localhost:5432/bank_app_platform
DB_HOST=localhost
DB_PORT=5432  
DB_NAME=bank_app_platform
DB_USER=postgres
DB_PASSWORD=yourpassword

# JWT Configuration
JWT_SECRET=your-super-secret-jwt-key-change-in-production
JWT_EXPIRES_IN=24h
REFRESH_TOKEN_SECRET=your-refresh-token-secret

# Server Configuration  
NODE_ENV=development
PORT=3001
WEB_PORT=8080

# Multi-Tenant
DEFAULT_TENANT=fmfb
```

---

## ‚ö†Ô∏è **CRITICAL WORKING COMPONENTS**

### **‚úÖ Currently Working (DO NOT MODIFY)**
1. **Database Integration**: Real data from FMFB tenant database
2. **API Endpoints**: All core routes functional (auth, wallets, transfers)  
3. **Frontend Components**: Dashboard, transaction history screens
4. **Multi-Tenant System**: Tenant detection and context switching
5. **JWT Authentication**: Token generation, validation, refresh
6. **Test Suite**: 40+ passing tests across backend and frontend

### **üîí Security Components Required (CRITICAL GAPS)**
1. **Zero Trust Architecture**: Never trust, always verify implementation needed
2. **CBN Compliance**: Nigerian regulatory compliance framework missing
3. **PCI DSS Level 1**: Cardholder data protection standards required
4. **AI Fraud Detection**: Real-time fraud scoring and behavioral analysis needed  
5. **HSM Key Management**: Hardware security modules for encryption keys missing
6. **WAF Protection**: Web Application Firewall with OWASP protection required
7. **SIEM Integration**: Security monitoring and incident response needed

### **üîÑ Recent Major Changes**
1. **Database Integration**: Removed hardcoded mock data, connected to real PostgreSQL
2. **TypeScript Fixes**: Resolved critical compilation errors in server routes
3. **Test Infrastructure**: Comprehensive test suite with backend/frontend separation
4. **Asset Management**: Base64 asset storage and serving system

---

## üß™ **Testing Architecture**

### **Multi-Project Jest Configuration**
- **Frontend Tests**: React Native component testing
- **Backend Tests**: API endpoint and database testing
- **Integration Tests**: Full system integration testing

### **Test Categories**
- **Unit Tests**: Individual function/component testing
- **API Tests**: HTTP endpoint testing with supertest
- **Database Tests**: Database operations and transactions
- **Integration Tests**: End-to-end workflow testing

---

## üö® **Common Pitfalls for New Agents**

### **‚ùå DO NOT**
1. **Recreate existing functionality** - Always check if features already exist
2. **Modify working database connections** - Database integration is functional  
3. **Change multi-tenant architecture** - Core tenant isolation is implemented
4. **Remove real data integration** - We moved away from hardcoded mock data
5. **Break existing API routes** - All routes are tested and working

### **‚úÖ ALWAYS DO**
1. **Read this document first** - Understand the complete architecture
2. **Run tests before changes** - Ensure no regression
3. **Check existing implementations** - Avoid duplicate work
4. **Preserve multi-tenant context** - Maintain tenant isolation
5. **Validate against database schema** - Use real database structure

---

## üéØ **Current Status**

### **Completed Features**  
- ‚úÖ Multi-tenant database architecture
- ‚úÖ JWT authentication system  
- ‚úÖ Core API endpoints (auth, wallets, transfers)
- ‚úÖ Frontend screens (dashboard, transactions, login)
- ‚úÖ Database integration with real data
- ‚úÖ Cross-platform support (mobile + web)
- ‚úÖ Comprehensive test suite

### **Next Development Priorities**
1. Fix remaining TypeScript compilation errors in scripts
2. Enhance error handling and validation
3. Add more comprehensive integration tests  
4. Implement advanced security features
5. Add real-time notifications
6. Enhance UI/UX components

---

**üìû For Questions**: Reference this document first, then examine existing code implementations before creating new functionality.

---

*Last Updated: September 5, 2025*  
*Version: 1.0*  
*Created for: Claude Code Agent Continuity*